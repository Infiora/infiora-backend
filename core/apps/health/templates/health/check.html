{% extends "health/base.html" %}

{% block title %}Health Check - {{ status|upper }}{% endblock %}

{% block content %}
<div class="header">
    <div class="status {% if overall_status %}healthy{% else %}unhealthy{% endif %}">
        {% if overall_status %}HEALTHY{% else %}UNHEALTHY{% endif %}
    </div>
    <div class="timestamp">Last checked: {{ timestamp|date:"Y-m-d H:i:s" }}</div>
    <button class="refresh-btn" onclick="refreshPage()">Refresh Now</button>
</div>

<div class="checks">
    {% for check_name, check_data in checks.items %}
    <div class="check-item">
        <div>
            <div class="check-name">{{ check_name|title }} Check</div>
            <div class="check-details">{{ check_data.message }}</div>
            {% if check_data.error %}
            <div class="check-error">Error: {{ check_data.error }}</div>
            {% endif %}
        </div>
        <div class="check-status {% if check_data.healthy %}status-healthy{% else %}status-unhealthy{% endif %}">
            {% if check_data.healthy %}HEALTHY{% else %}UNHEALTHY{% endif %}
        </div>
    </div>
    {% endfor %}
</div>

<div class="footer">
    <p>ðŸ”„ Auto-refreshes every 30 seconds</p>
    <p>For JSON format, add <code>?format=json</code> to the URL</p>
    <p>Available endpoints:</p>
    <ul style="list-style: none; padding: 0;">
        <li><code>/health/</code> - Complete health check</li>
        <li><code>/health/ready/</code> - Readiness check</li>
        <li><code>/health/live/</code> - Liveness check</li>
    </ul>
</div>
{% endblock %}